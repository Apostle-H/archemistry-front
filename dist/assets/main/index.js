System.register("chunks:///_virtual/auth_in.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"5914aCS+wdJXpgM8AS4no5A","auth_in",void 0);t("AuthIn",(function(t,i){void 0===i&&(i=null),this.init_data_raw=void 0,this.referred_by_tg_id=void 0,this.init_ton=void 0,this.auth_type=void 0,this.init_data_raw=t,this.referred_by_tg_id=i,this.init_ton={address:"---",signature:"full"},this.auth_type="telegram"}));i._RF.pop()}}}));

System.register("chunks:///_virtual/bootstrapper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts","./match_config_loader.ts","./user_game_state.ts","./energy_sinqer.ts","./core_state_machine.ts","./core_states.ts","./tasks_icons_config.ts","./haptic_tg.ts","./energy_icons_config.ts"],(function(e){var t,n,o,i,r,a,s,c,u,l,p,f,g,d,h,y,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,c=e.Component},function(e){u=e.WebUtils},function(e){l=e.MatchConfigsLoader},function(e){p=e.userGameState},function(e){f=e.EnergySinqer},function(e){g=e.coreStateMachine},function(e){d=e.CoreState},function(e){h=e.TasksIconsConfig},function(e){y=e.HapticTg},function(e){_=e.EnergyIconsConfig}],execute:function(){var b,m,v,S,q,z,D;r._RF.push({},"7a239EoXEFDf4HQzqf4KjDW","bootstrapper",void 0);var E=a.ccclass,w=a.property;e("Bootstrapper",(b=E("bootstrapper"),m=w({type:s}),v=w({type:f}),b((z=t((q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"preloader",z,i(t)),o(t,"energySinqer",D,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){u.authorizedEt.once((!0).toString(),this.load,this),h.load(),_.load(),this.bind()},r.onEnable=function(){u.auth()},r.onDestroy=function(){this.expose()},r.load=function(){var e=this;g.start(d.MAIN),this.energySinqer.launch(),Promise.all([p.load(),l.load(),new Promise((function(e){setTimeout(e,1e3)}))]).then((function(){e.preloader.active=!1}))},r.bind=function(){y.bind()},r.expose=function(){y.expose()},t}(c)).prototype,"preloader",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(q.prototype,"energySinqer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=q))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/core_state_machine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./state_action.ts"],(function(t){var e,n,i,r;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,i=t.EventTarget},function(t){r=t.StateAction}],execute:function(){n._RF.push({},"a5606zSImhLopKwceQBrvvs","core_state_machine",void 0);var c=t("coreSwitchEt",new i),s=t("coreStateEt",new i),o=t("CoreStateMachine",function(){function t(){this._started=void 0,this._currentState=void 0}var n=t.prototype;return n.start=function(t){this.switch(t),this._started=!0,this.bind()},n.bind=function(){c.on((!0).toString(),this.switch,this)},n.expose=function(){c.off((!0).toString(),this.switch,this)},n.switch=function(t){this._currentState==t&&this._started||(s.emit(this._currentState,r.EXIT),this._currentState=t,s.emit(this._currentState,r.ENTER),s.emit("any",r.ENTER))},e(t,[{key:"currentState",get:function(){return this._currentState}}]),t}());t("coreStateMachine",new o);n._RF.pop()}}}));

System.register("chunks:///_virtual/core_state_node_switch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./core_states.ts","./state_action.ts","./core_state_machine.ts","./node_state_action.ts"],(function(t){var e,n,i,o,r,a,c,s,u,h,l,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Enum,s=t.Component},function(t){u=t.CoreState},function(t){h=t.StateAction},function(t){l=t.coreStateEt,f=t.coreStateMachine},function(t){p=t.NodeStateAction}],execute:function(){var d,_,y,S,g,v,w;r._RF.push({},"a9ac4NgV1VPbbhIDDu5sms5","core_state_node_switch",void 0);var b=a.ccclass,E=a.property;t("CoreStateNodeSwitch",(d=b("core-state-node-switch"),_=E({type:c(u)}),y=E({type:[p]}),d((v=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"targetState",v,o(e)),i(e,"nodes",w,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){l.once("any",this.init,this),l.on(this.targetState,this.switch,this)},r.onDestroy=function(){l.off(this.targetState,this.switch,this)},r.init=function(){f.currentState!=this.targetState&&this.switch(h.EXIT)},r.switch=function(t){this.nodes.forEach((function(e){var n=t==h.ENTER?e.ActiveOnEnter:!e.ActiveOnEnter;return e.Node.active=n}))},e}(s)).prototype,"targetState",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(g.prototype,"nodes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=g))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/core_state_switch_button.ts",["./rollupPluginModLoBabelHelpers.js","cc","./core_states.ts","./state_action.ts","./core_state_machine.ts","./haptic_tg.ts"],(function(t){var e,i,n,o,s,c,r,a,h,u,l,p,_,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,c=t._decorator,r=t.Enum,a=t.EventHandler,h=t.Button,u=t.Component},function(t){l=t.CoreState},function(t){p=t.StateAction},function(t){_=t.coreStateEt,d=t.coreSwitchEt},function(t){f=t.HapticTg}],execute:function(){var b,g,w,v,E;s._RF.push({},"f6ac5DWVyxL0JUdfv85Mggo","core_state_switch_button",void 0);var S=c.ccclass,y=c.property;t("CoreStateSwitchButton",(b=S("core-state-switch-button"),g=y({type:r(l)}),b((E=e((v=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s))||this,n(e,"targetState",E,o(e)),e._button=void 0,e._switchHandler=new a,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this._button=this.node.getComponent(h),this._switchHandler.target=this.node,this._switchHandler.component="core-state-switch-button",this._switchHandler.handler="switch",_.on(this.targetState,this.bindExpose,this),this.bind()},s.onDestroy=function(){_.off(this.targetState,this.bindExpose,this)},s.bindExpose=function(t){switch(t){case p.ENTER:this.expose();break;case p.EXIT:this.bind()}},s.bind=function(){this._button.clickEvents.push(this._switchHandler)},s.expose=function(){var t=this._button.clickEvents.indexOf(this._switchHandler);this._button.clickEvents.splice(t,1)},s.switch=function(){f.light(),d.emit((!0).toString(),this.targetState)},e}(u)).prototype,"targetState",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=v))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/core_states.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"7e39dSPUmBLQKVS1Z+9OP5h","core_states",void 0);t("CoreState",function(t){return t[t.NONE=0]="NONE",t[t.TASKS=1]="TASKS",t[t.MAIN=2]="MAIN",t[t.LEADERBOARD=3]="LEADERBOARD",t[t.REFERRAL=4]="REFERRAL",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/daily_task_out.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"9198biq39VKlZ7fieYJpoPz","daily_task_out",void 0);t("DailyTaskOut",(function(){this.type=void 0,this.description=void 0,this.progress=void 0,this.target=void 0,this.reward_type=void 0,this.reward=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/energy_counter_label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./user_game_state.ts","./state_action.ts","./core_state_machine.ts","./core_states.ts"],(function(t){var e,n,o,r,i,s,a,c,u,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Label,i=t.Component},function(t){s=t.userGameState,a=t.energyUpdatedEt},function(t){c=t.StateAction},function(t){u=t.coreStateEt},function(t){l=t.CoreState}],execute:function(){var f;n._RF.push({},"3b67arTdfVGpJ7JFYdAmmtJ","energy_counter_label",void 0);var h=o.ccclass;o.property,t("EnergyCounterLabel",h("energy-counter-label")(f=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._label=void 0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this._label=this.node.getComponent(r),u.on(l.MAIN,this.bindExpose,this)},o.onDestroy=function(){u.off(l.MAIN,this.bindExpose,this)},o.bindExpose=function(t){switch(t){case c.ENTER:s.energy&&s.maxEnergy&&this.draw(s.energy,s.maxEnergy),this.bind();break;case c.EXIT:this.expose()}},o.bind=function(){a.on((!0).toString(),this.draw,this)},o.expose=function(){a.off((!0).toString(),this.draw,this)},o.draw=function(t,e){this._label.string=t+"/"+e},n}(i))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/energy_icons_config.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,o,t,c,r,i,s;return{setters:[function(n){e=n.createClass,o=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy,c=n.EventTarget,r=n.resources,i=n.JsonAsset,s=n.SpriteFrame}],execute:function(){t._RF.push({},"c39286PHPFA5aCb5L7W5Z0i","energy_icons_config",void 0);var a=n("loadedEnergyIconsEt",new c),u=n("EnergyIconsConfig",function(){function n(){}return n.getSpriteByCode=function(n){return this._codeIconsMap.get(n)},n.load=function(){var n=this;return new Promise((function(e,t){r.load("shop/configs/energy-icons-config",i,(function(c,r){for(var i,s=[],u=o(r.json.icons);!(i=u()).done;){var f=i.value;s.push(n.mapIcon(f.code,f.sprite_path))}Promise.all(s).then((function(){n._loaded=!0,a.emit((!0).toString()),e()})).catch((function(){t()}))}))}))},n.mapIcon=function(n,e){var o=this;return new Promise((function(t,c){r.load(e,s,(function(e,r){e?c():(o._codeIconsMap.set(n,r),t())}))}))},e(n,null,[{key:"loaded",get:function(){return this._loaded}}]),n}());u._codeIconsMap=new Map,u._loaded=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/energy_sinqer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts","./user_game_state.ts"],(function(e){var t,n,r,s,o,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,s=e.macro,o=e.Component},function(e){i=e.WebUtils},function(e){u=e.userGameState}],execute:function(){var c;n._RF.push({},"b602bSlaYVJx5pg9BOPJlvD","energy_sinqer",void 0);var a=r.ccclass;r.property,e("EnergySinqer",a("energy-sinqer")(c=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this)._busy=void 0,t}t(n,e);var r=n.prototype;return r.launch=function(){this.restore(),this.schedule(this.restore,60,s.REPEAT_FOREVER)},r.restore=function(){var e=this;this._busy||(this._busy=!0,i.post_with_auth("/match/restore",{}).then((function(t){return t.json().then((function(t){u.updateEnergy(t.energy,t.max_energy),e._busy=!1}))})))},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/fade.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,o,s,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.EventTarget,s=t.Node,c=t.Component}],execute:function(){var r;e._RF.push({},"d9c473rK1dALoHguS8fKbtH","fade",void 0);var h=n.ccclass,d=(n.property,t("fadeEt",new o)),f=t("fadeClickEt",new o);t("Fade",h("fade")(r=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.onLoad=function(){this.bind(),this.hide()},n.onDestroy=function(){this.expose()},n.bind=function(){d.on((!0).toString(),this.show,this),d.on((!1).toString(),this.hide,this),this.node.on(s.EventType.TOUCH_END,this.clicked)},n.expose=function(){d.off((!0).toString(),this.show,this),d.off((!1).toString(),this.hide,this),this.node.off(s.EventType.TOUCH_END,this.clicked)},n.show=function(){this.node.active=!0},n.hide=function(){this.node.active=!1},n.clicked=function(){f.emit((!0).toString())},e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/footer_button.ts",["./rollupPluginModLoBabelHelpers.js","cc","./core_states.ts","./core_state_machine.ts","./state_action.ts"],(function(t){var e,i,o,n,a,s,r,c,l,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Animation,c=t.Component},function(t){l=t.CoreState},function(t){p=t.coreStateEt},function(t){h=t.StateAction}],execute:function(){var u,f,_,m,y;a._RF.push({},"ff42b+/rI5PIKaSSMo5f51/","footer_button",void 0);var d=s.ccclass,g=s.property;t("FooterButton",(u=d("footer-button"),f=g({type:l}),u((y=e((m=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,o(e,"targetState",y,n(e)),e._animaton=void 0,e._pressClip=void 0,e._releaseClip=void 0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this._animaton=this.node.getComponent(r),this._pressClip=this._animaton.clips[0],this._releaseClip=this._animaton.clips[1],p.on(this.targetState,this.switch,this)},a.onDestroy=function(){p.off(this.targetState,this.switch,this)},a.switch=function(t){switch(t){case h.ENTER:this._animaton.play(this._pressClip.name);break;case h.EXIT:this._animaton.play(this._releaseClip.name)}},e}(c)).prototype,"targetState",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=m))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/friend_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,i,a,l,o,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,s=e.Component}],execute:function(){var c,p,u,b,f,y,d;a._RF.push({},"4002ejhOotKy534RixwwAyW","friend_panel",void 0);var h=l.ccclass,g=l.property;e("FriendPanel",(c=h("friend-panel"),p=g({type:o}),u=g({type:o}),c((y=r((f=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return r=e.call.apply(e,[this].concat(a))||this,n(r,"usernameLabel",y,i(r)),n(r,"scoreLabel",d,i(r)),r}return t(r,e),r.prototype.updateData=function(e,r){this.usernameLabel.string=e,this.scoreLabel.string=r.toString()},r}(s)).prototype,"usernameLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=r(f.prototype,"scoreLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=f))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/friends_loader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts","./core_state_machine.ts","./core_states.ts","./friend_panel.ts","./state_action.ts"],(function(e){var n,t,r,i,a,o,s,l,c,f,u,d,p,h,_;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,l=e.Prefab,c=e.instantiate,f=e.Component},function(e){u=e.WebUtils},function(e){d=e.coreStateEt},function(e){p=e.CoreState},function(e){h=e.FriendPanel},function(e){_=e.StateAction}],execute:function(){var P,b,y,g,v,R,m;a._RF.push({},"2b3ca6Yg5pOLYaIT9R+V/vU","friends_loader",void 0);var w=o.ccclass,L=o.property;e("FriendsLoader",(P=w("friends-loader"),b=L({type:s}),y=L({type:l}),P((R=n((v=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,r(n,"holder",R,i(n)),r(n,"friendPanelPrefab",m,i(n)),n._friendsPanels=[],n}t(n,e);var a=n.prototype;return a.onLoad=function(){d.on(p.REFERRAL,this.load,this)},a.onDestroy=function(){d.off(p.REFERRAL,this.load,this)},a.load=function(e){var n=this;e!=_.EXIT&&u.get_with_auth("/referral/user_all").then((function(e){return e.json().then((function(e){for(var t=e,r=0;r<t.length;r++)r>=n._friendsPanels.length&&n._friendsPanels.push(n.newPanel()),n._friendsPanels[r].updateData(t[r].username,t[r].score)}))}))},a.newPanel=function(){var e=c(this.friendPanelPrefab),n=e.getComponent(h);return e.setParent(this.holder),n},n}(f)).prototype,"holder",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=n(v.prototype,"friendPanelPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=v))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/funcs.ts",["cc"],(function(n){var o;return{setters:[function(n){o=n.cclegacy}],execute:function(){n({convertLocalToOtherLocal:function(n,o,c){var t=c.convertToWorldSpaceAR(n);return o.convertToNodeSpaceAR(t)},inBounds:function(n,o){var c=o.getUILocation();return n.getBoundingBoxToWorld().contains(c)}}),o._RF.push({},"0d76eXJmhFI3o+Q0nOdC1Bv","funcs",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/funcs2.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e({eventTargetEmptyWithPormise:function(e,n,r){return new Promise((function(t){e.once(n,(function(){return r(t)}))}))},eventTargetWithPormise:function(e,n,r){return new Promise((function(t){e.once(n,(function(e){return r(e,t)}))}))},promiseAny:function(e){return new Promise((function(n,r){var t=0,c=[];if(0===e.length)return r(new Error("All promises were rejected"));e.forEach((function(o,u){o.then(n).catch((function(n){c[u]=n,(t+=1)===e.length&&r(new Error("All promises were rejected"))}))}))}))}}),n._RF.push({},"1f620P4zp9CuqhurAXBojKG","funcs",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/funcs3.ts",["cc"],(function(e){var l;return{setters:[function(e){l=e.cclegacy}],execute:function(){e("checkApiAvailablity",(function(){return!(null==globalThis.Telegram||null==globalThis.Telegram.WebApp||""==globalThis.Telegram.WebApp.initData)})),l._RF.push({},"3186eXCt0BJPLBQ9pFWGLLu","funcs",void 0),l._RF.pop()}}}));

System.register("chunks:///_virtual/funcs4.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("tweenWithPromiseCall",(function(t){return new Promise((function(e){t.call(e).start()}))})),e._RF.push({},"cd9eadASyBLtKe9Uiz6npsw","funcs",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/haptic_tg.ts",["cc","./match_clear.ts","./match_move.ts","./match_clearer.ts","./match_mover.ts"],(function(t){var i,c,e,n,o;return{setters:[function(t){i=t.cclegacy},function(t){c=t.MatchClear},function(t){e=t.MatchMove},function(t){n=t.clearEt},function(t){o=t.moveEt}],execute:function(){i._RF.push({},"e04b3YjTu5GCoFQRYnoATqa","haptic_tg",void 0);t("HapticTg",function(){function t(){}return t.bind=function(){o.on(e.SUCCESS,this.light,this),o.on(e.FAILED,this.error,this),n.on(c.STARTED,this.heavy,this)},t.expose=function(){o.off(e.SUCCESS,this.light,this),o.off(e.FAILED,this.error,this),n.off(c.STARTED,this.heavy,this)},t.light=function(){this.impact("light")},t.heavy=function(){this.impact("heavy")},t.impact=function(t){null!=globalThis.Telegram&&null!=globalThis.Telegram.WebApp&&globalThis.Telegram.WebApp.HapticFeedback.impactOccurred(t)},t.success=function(){this.notification("success")},t.error=function(){this.notification("error")},t.notification=function(t){null!=globalThis.Telegram&&null!=globalThis.Telegram.WebApp&&globalThis.Telegram.WebApp.HapticFeedback.notificationOccurred(t)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/hard_counter_label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./user_game_state.ts"],(function(t){var n,e,o,r,i,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Label,i=t.Component},function(t){a=t.hardUpdatedEt}],execute:function(){var s;e._RF.push({},"83f75/vnhtBD6/StzkShXUn","hard_counter_label",void 0);var c=o.ccclass;o.property,t("HardCounterLabel",c("hard-counter-label")(s=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this)._label=void 0,n}n(e,t);var o=e.prototype;return o.onLoad=function(){this._label=this.node.getComponent(r),this.bind()},o.onDestroy=function(){this.expose()},o.bind=function(){a.on((!0).toString(),this.draw,this)},o.expose=function(){a.off((!0).toString(),this.draw,this)},o.draw=function(t){this._label.string=t.toString()},e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/invite_copy_button.ts",["./rollupPluginModLoBabelHelpers.js","cc","./state_action.ts","./core_state_machine.ts","./core_states.ts","./referral_link_generator.ts","./web_utils.ts","./haptic_tg.ts"],(function(t){var n,o,e,i,c,s,r,a,u,p,l,h;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,c=t.EventHandler,s=t.Component},function(t){r=t.StateAction},function(t){a=t.coreStateEt},function(t){u=t.CoreState},function(t){p=t.generate_referral_link},function(t){l=t.WebUtils},function(t){h=t.HapticTg}],execute:function(){var _;o._RF.push({},"accb1uAn7JEYLyyJzl3fD9X","invite_copy_button",void 0);var f=e.ccclass;e.property,t("InviteCopyButton",f("invite-copy-button")(_=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this)._button=void 0,n._copyHandler=new c,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this._button=this.node.getComponent(i),this._copyHandler.target=this.node,this._copyHandler.component="invite-copy-button",this._copyHandler.handler="copy",a.on(u.REFERRAL,this.bindExpose,this)},e.onDestroy=function(){a.off(u.REFERRAL,this.bindExpose,this)},e.bindExpose=function(t){switch(t){case r.ENTER:this.bind();break;case r.EXIT:this.expose()}},e.bind=function(){this._button.clickEvents.push(this._copyHandler)},e.expose=function(){var t=this._button.clickEvents.indexOf(this._copyHandler);this._button.clickEvents.splice(t,1)},e.copy=function(){navigator.clipboard.writeText(p(l.tgId)).then((function(){h.success()})).catch((function(){h.error()}))},o}(s))||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/invite_widget_button.ts",["./rollupPluginModLoBabelHelpers.js","cc","./state_action.ts","./core_state_machine.ts","./core_states.ts","./referral_link_generator.ts","./web_utils.ts","./funcs3.ts"],(function(t){var e,n,i,o,s,c,r,a,u,l,h,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Button,s=t.EventHandler,c=t.Component},function(t){r=t.StateAction},function(t){a=t.coreStateEt},function(t){u=t.CoreState},function(t){l=t.generate_referral_link},function(t){h=t.WebUtils},function(t){p=t.checkApiAvailablity}],execute:function(){var d;n._RF.push({},"57652kf6F5LVI6UPbkhUpzL","invite_widget_button",void 0);var _=i.ccclass;i.property,t("InviteWidgetButton",_("invite-widget-button")(d=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._button=void 0,e._copyHandler=new s,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this._button=this.node.getComponent(o),this._copyHandler.target=this.node,this._copyHandler.component="invite-widget-button",this._copyHandler.handler="widget",a.on(u.REFERRAL,this.bindExpose,this)},i.onDestroy=function(){a.off(u.REFERRAL,this.bindExpose,this)},i.bindExpose=function(t){switch(t){case r.ENTER:this.bind();break;case r.EXIT:this.expose()}},i.bind=function(){this._button.clickEvents.push(this._copyHandler)},i.expose=function(){var t=this._button.clickEvents.indexOf(this._copyHandler);this._button.clickEvents.splice(t,1)},i.widget=function(){var t="https://t.me/share/url?url="+encodeURIComponent(l(h.tgId))+"&text=🧪%20Archemistry:%20Join%20the%20Alchemical%20Adventure!";p()?globalThis.Telegram.WebApp.openTelegramLink(t):globalThis.open(t)},n}(c))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./auth_in.ts","./bootstrapper.ts","./core_state_machine.ts","./core_state_node_switch.ts","./core_state_switch_button.ts","./core_states.ts","./footer_button.ts","./haptic_tg.ts","./match_clear.ts","./match_direction.ts","./match_move.ts","./match_swipe.ts","./match_config_loader.ts","./match_elements_config.ts","./match_grid_config.ts","./match_clear_out.ts","./match_config_out.ts","./match_element_out.ts","./match_move_in.ts","./match_user_slot_out.ts","./match_clearer.ts","./match_element.ts","./match_grid.ts","./match_grid_view.ts","./match_mover.ts","./match_slot.ts","./place_view_config.ts","./user_rating.ts","./rating_out.ts","./rating_loader.ts","./rating_panel.ts","./new_referral_in.ts","./referral_out.ts","./friend_panel.ts","./friends_loader.ts","./invite_copy_button.ts","./invite_widget_button.ts","./referral_link_generator.ts","./energy_icons_config.ts","./shop_energy_item_out.ts","./shop_energy_item_panel.ts","./shop_loader.ts","./shop_opener.ts","./tasks_icons_config.ts","./daily_task_out.ts","./social_task_out.ts","./rofl_task_details_panel.ts","./socail_task_details_panel.ts","./task_panel.ts","./tasks_loader.ts","./energy_counter_label.ts","./energy_sinqer.ts","./hard_counter_label.ts","./score_counter_label.ts","./soft_counter_label.ts","./user_game_state.ts","./funcs2.ts","./map_pool.ts","./pool.ts","./node_state_action.ts","./state_action.ts","./funcs3.ts","./funcs4.ts","./simple_vec2.ts","./fade.ts","./funcs.ts","./web_utils.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/map_pool.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"d2342f6GAZDYJBd+3hVL4bk","map_pool",void 0);t("MapPool",function(){function t(t,o,i){this._factory=void 0,this._onGet=void 0,this._onPut=void 0,this._pool=new Map,this._factory=t,this._onGet=o,this._onPut=i}var o=t.prototype;return o.get=function(t){if(!this._pool.has(t)||this._pool.get(t).length<1)return this._factory(t);var o=this._pool.get(t).shift();return this._onGet(o),o},o.put=function(t,o){this._pool.has(t)||this._pool.set(t,[]),this._onPut(o),this._pool.get(t).push(o)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/match_clear_out.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"fd207NIjZNAprV2vdlp2Na+","match_clear_out",void 0);t("MatchClearOut",(function(){this.results=void 0,this.refresh_pos=void 0,this.soft=void 0,this.score=void 0}));c._RF.pop()}}}));

System.register("chunks:///_virtual/match_clear.ts",["cc"],(function(c){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"64733p0cU5Pupgfcsx7IbpX","match_clear",void 0);c("MatchClear",function(c){return c[c.STARTED=0]="STARTED",c[c.CLEARED=1]="CLEARED",c[c.EMPTY=2]="EMPTY",c}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/match_clearer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts","./match_config_loader.ts","./match_grid.ts","./match_mover.ts","./funcs.ts","./funcs4.ts","./match_clear.ts","./match_move.ts","./core_state_machine.ts","./core_states.ts","./state_action.ts","./user_game_state.ts","./funcs2.ts"],(function(e){var t,n,r,o,i,a,c,s,l,u,f,h,m,p,d,v,y,g,E,_,b,w,T,C,S,x,M,P,k,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,c=e._decorator,s=e.EventTarget,l=e.UITransform,u=e.CCFloat,f=e.Vec2,h=e.Vec3,m=e.tween,p=e.Component},function(e){d=e.WebUtils},function(e){v=e.matchGridConfig,y=e.matchElementsPool},function(e){g=e.MatchGrid,E=e.matchGridLoadedEt},function(e){_=e.moveEt},function(e){b=e.convertLocalToOtherLocal},function(e){w=e.tweenWithPromiseCall},function(e){T=e.MatchClear},function(e){C=e.MatchMove},function(e){S=e.coreStateEt},function(e){x=e.CoreState},function(e){M=e.StateAction},function(e){P=e.userGameState},function(e){k=e.promiseAny,I=e.eventTargetWithPormise}],execute:function(){var z,D,G,L,A,F,N,R,U,q,B;a._RF.push({},"6dc5bTeDXtKl5rBB+v1Pzqh","match_clearer",void 0);var O=c.ccclass,W=c.property,j=e("clearEt",new s);e("MatchClearer",(z=O("match-clearer"),D=W({type:g}),G=W({type:l}),L=W({type:u}),A=W({type:u}),z((R=t((N=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"matchGrid",R,o(t)),r(t,"matchElementsSpawn",U,o(t)),r(t,"fallDelayTime",q,o(t)),r(t,"fallTime",B,o(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){S.on(x.MAIN,this.bindExpose,this)},a.onDestroy=function(){S.off(x.MAIN,this.bindExpose,this)},a.bindExpose=function(e){switch(e){case M.ENTER:this.bind();break;case M.EXIT:this.expose()}},a.bind=function(){E.once((!0).toString(),this.checkLoaded,this),_.on(C.SUCCESS,this.checkMoved,this)},a.expose=function(){_.off(C.SUCCESS,this.checkMoved,this)},a.checkLoaded=function(){var e,t=(e=[]).concat.apply(e,this.matchGrid.slots).map((function(e){return e.index}));this.checkClear(t)},a.checkMoved=function(e,t){this.checkClear([e,t])},a.checkClear=function(e){for(var t,n=this,r=this.matchGrid.slots.map((function(e){return e.map((function(e){return e.element.targetId}))})),o=[],a=i(e);!(t=a()).done;){var c=t.value;v.checkFromIndex(c,r).forEach((function(e){for(var t,n,r=function(){var t=n.value;if(e.every((function(e){return t.some((function(t){return t.equals(e)}))})))return{v:void 0}},a=i(o);!(n=a()).done;)if(t=r())return t.v;o.push(e)}))}(o=o.filter((function(e){return e.length>0}))).length<1?j.emit(T.EMPTY):(j.emit(T.STARTED),d.post_with_auth("/match/clear",{clusters:o}).then((function(e){return e.json().then((function(e){var t,r=e;if(r.refresh_pos.length<1)j.emit(T.CLEARED);else{for(var a,c=o.filter((function(e,t){return r.results[t]})),s=(t=[]).concat.apply(t,c),l=new Map,u=i(r.refresh_pos);!(a=u()).done;){var f=a.value;l.set(f.pos.x+"-"+f.pos.y,f.element_id)}P.updateSoft(r.soft),P.updateScore(r.score),n.clear(s,l)}}))})))},a.clear=function(e,t){for(var n,r=this,o={},a=[],c=i(e);!(n=c()).done;){var s=n.value;if(s.x in o)s.y<o[s.x][0]?(o[s.x][0]=s.y,a.push(s.clone())):s.y>o[s.x][1]-1&&(o[s.x][1]=s.y+1);else{o[s.x]=[s.y,s.y+1];for(var u=s.y;u<v.size.y;u++)a.push(new f(s.x,u))}}var m=[];for(var p in o)for(var d=p,g=o[d][1]-o[d][0],E=function(){var e,n,i=r.matchGrid.slots[d][_];if(_<o[p][1]&&k([i.element.clear(),I(S,x.MAIN,(function(e,t){return t()}))]).then((function(){return y.put(i.element.targetId,i.element)})),_+g<v.size.y){var a=r.matchGrid.slots[d][_+g];e=a.getComponent(l),n=a.element}else{e=r.matchElementsSpawn;var c=t.get(d+"-"+_);(n=y.get(c)).node.setParent(r.matchElementsSpawn.node),n.node.setPosition(new h)}var s=r.elementFallTween(n.node,i.element.node.position,e,i.getComponent(l)).call((function(){i.set(n)}));m.push(s)},_=o[d][0];_<v.size.y;_++)E();var b=m.map((function(e){return w(e)}));k([new Promise((function(e,t){return Promise.all(b).then((function(){return e()})).catch((function(){return t()}))})),I(S,x.MAIN,(function(e,t){e==M.ENTER&&t()}))]).then((function(){return r.checkClear(a)}))},a.elementFallTween=function(e,t,n,r){var o=b(t,n,r);return e.setPosition(new h(o.x)),m(e.position).delay(this.fallDelayTime).to(this.fallTime,o,{easing:"quartOut",onUpdate:function(t,n){e.setPosition(t)}})},t}(p)).prototype,"matchGrid",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(N.prototype,"matchElementsSpawn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(N.prototype,"fallDelayTime",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(N.prototype,"fallTime",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=N))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/match_config_loader.ts",["cc","./match_elements_config.ts","./match_grid_config.ts","./map_pool.ts"],(function(n){var t,o,e,c,i;return{setters:[function(n){t=n.cclegacy,o=n.EventTarget},function(n){e=n.MatchElementsConfig},function(n){c=n.MatchGridConfig},function(n){i=n.MapPool}],execute:function(){t._RF.push({},"08d39AxO95OiY6Kx02sAny8","match_config_loader",void 0);var a=n("matchConfigsLoadedEt",new o),r=n("matchGridConfig",new c),f=new e;n("matchElementsPool",new i(f.getInstanceById.bind(f),(function(n){return n.node.active=!0}),(function(n){return n.node.active=!1}))),n("MatchConfigsLoader",function(){function n(){}return n.load=function(){return new Promise((function(n,t){Promise.all([r.load(),f.load()]).then((function(){a.emit((!0).toString()),n()})).catch((function(){t()}))}))},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/match_config_out.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"d7140LdGVVC4rYujUvNBD8F","match_config_out",void 0);t("MatchConfigOut",(function(){this.size=void 0,this.sets=void 0}));c._RF.pop()}}}));

System.register("chunks:///_virtual/match_direction.ts",["cc"],(function(e){var r,t;return{setters:[function(e){r=e.cclegacy,t=e.Vec2}],execute:function(){e({applyToVec2:function(e,r){var n;switch(r){case c.LEFT:n=new t(e.x-1,e.y);break;case c.UP:n=new t(e.x,e.y+1);break;case c.RIGHT:n=new t(e.x+1,e.y);break;case c.DOWN:n=new t(e.x,e.y-1)}return n},directionFromVec2:function(e,r){var t=r.x-e.x,n=r.y-e.y;if(Math.abs(t)>Math.abs(n)){if(e.x>r.x)return c.LEFT;if(e.x<r.x)return c.RIGHT}else{if(e.y<r.y)return c.UP;if(e.y>r.y)return c.DOWN}}}),r._RF.push({},"f28e2inj0pKjocZ+yfk8Ux5","match_direction",void 0);var c=e("MatchDirection",function(e){return e[e.LEFT=0]="LEFT",e[e.UP=1]="UP",e[e.RIGHT=2]="RIGHT",e[e.DOWN=3]="DOWN",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/match_element_out.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"22cf4xUKNNDSbp2FfIO9rQl","match_element_out",void 0);t("MatchElementOut",(function(){this.id=void 0,this.title=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/match_element.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,a,o,r,l,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,l=t._decorator,c=t.Animation,s=t.Component}],execute:function(){var p,u,m,d,h;r._RF.push({},"d3652jboJlMlKjJPNG74bFO","match_element",void 0);var y=l.ccclass,f=l.property;t("MatchElement",(p=y("match-element"),u=f({type:c}),p((h=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"animaton",h,a(e)),e._targetId=void 0,e._idleClip=void 0,e._destroyClip=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this._idleClip=this.animaton.clips[0],this._destroyClip=this.animaton.clips[1]},r.onEnable=function(){this.animaton.play(this._idleClip.name)},r.init=function(t){this._targetId=t},r.clear=function(){var t=this;return new Promise((function(e){t.animaton.play(t._destroyClip.name),t.animaton.once(c.EventType.FINISHED,e)}))},o(e,[{key:"targetId",get:function(){return this._targetId}}]),e}(s)).prototype,"animaton",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=d))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/match_elements_config.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts","./match_element.ts"],(function(t){var e,n,r,s,i,a,o,c,u,l,m;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,i=t.EventTarget,a=t.instantiate,o=t.resources,c=t.Prefab,u=t.JsonAsset},function(t){l=t.WebUtils},function(t){m=t.MatchElement}],execute:function(){s._RF.push({},"2fad2NtylhMJLI0VgqhY7LP","match_elements_config",void 0);var f=t("matchElemetsLoadedEt",new i);t("MatchElementsConfig",function(){function t(){this.elementsMap=void 0,this.idsElementsMap={},this.titlesIdsMap={}}var s=t.prototype;return s.getInstanceByTitle=function(t){return this.getInstanceById(this.titlesIdsMap[t])},s.getInstanceById=function(t){var e=a(this.idsElementsMap[t]).getComponent(m);return e.init(t),e},s.load=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){o.load("match/configs/match-elements-config",u,(function(r,s){r&&n(),e.elementsMap=s,e.fetchElements().then(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s.fetchElements=function(){var t=this;return l.get_with_auth("/match/all").then((function(e){return e.json().then((function(e){var n=e;return t.mapElements(n)}))}))},s.mapElements=function(t){for(var n,r=[],s=e(t);!(n=s()).done;){var i=n.value;r.push(this.mapElement(i))}return Promise.all(r).then((function(){f.emit((!0).toString())}))},s.mapElement=function(t){var n=this;return new Promise((function(r,s){n.titlesIdsMap[t.title]=t.id;for(var i,a=e(n.elementsMap.json.elements);!(i=a()).done;){var u=i.value;u.title==t.title&&o.load(u.prefab_path,c,(function(e,i){e&&s(),n.idsElementsMap[t.id]=i,r()}))}}))},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/match_grid_config.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts"],(function(t){var n,e,r,i,u;return{setters:[function(t){n=t.createForOfIteratorHelperLoose,e=t.createClass},function(t){r=t.cclegacy,i=t.Vec2},function(t){u=t.WebUtils}],execute:function(){r._RF.push({},"572baLQqVhIQpJj1BfKpj2Z","match_grid_config",void 0);t("MatchGridConfig",function(){function t(){this._size=void 0,this._sets=void 0}var r=t.prototype;return r.outOfBounds=function(t){return t.x<0||t.x>=this._size.x||t.y<0||t.y>=this._size.y},r.checkFromIndex=function(t,e){for(var r,u=this,o=[],s=n(this._sets);!(r=s()).done;)for(var c,f,a=r.value,h=function(){var n=f.value,r=a.map((function(e){return new i(t.x-n.x+e.x,t.y-n.y+e.y)}));if(r.some((function(t){return u.outOfBounds(t)})))return 0;var s=e[r[0].x][r[0].y];return r.every((function(t){return e[t.x][t.y]==s}))?(o.some((function(t){return r.every((function(n){return t.some((function(t){return t.equals(n)}))}))}))||o.push(r),1):0},_=n(a);!(f=_()).done&&(0===(c=h())||1!==c););return o},r.load=function(){return this.fetchConfig()},r.fetchConfig=function(){var t=this;return u.get_with_auth("/static/match").then((function(n){return n.json().then((function(n){var e=n;t._size=new i(e.size.x,e.size.y),t._sets=e.sets.map((function(t){return t.map((function(t){return new i(t.x,t.y)}))}))}))}))},e(t,[{key:"size",get:function(){return this._size}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/match_grid_view.ts",["./rollupPluginModLoBabelHelpers.js","cc","./match_config_loader.ts"],(function(t){var e,i,r,o,n,a,c,s,l,u,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.EventTarget,s=t.Prefab,l=t.instantiate,u=t.Component},function(t){d=t.matchConfigsLoadedEt,f=t.matchGridConfig}],execute:function(){var p,h,v,g,y;n._RF.push({},"9df1eRFupFPMrsBv3zGKHCk","match_grid_view",void 0);var m=a.ccclass,w=a.property;t("matchGridLoadedEt",new c),t("MatchGridView",(p=m("match-grid-view"),h=w({type:s}),p((y=e((g=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"slotView",y,o(e)),e}i(e,t);var n=e.prototype;return n.onLoad=function(){d.once((!0).toString(),this.loadSlots,this)},n.loadSlots=function(){for(var t=0;t<f.size.x;t++)for(var e=0;e<f.size.y;e++){l(this.slotView).setParent(this.node)}},e}(u)).prototype,"slotView",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/match_grid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./match_slot.ts","./web_utils.ts","./match_config_loader.ts","./core_state_machine.ts","./core_states.ts","./state_action.ts"],(function(t){var e,n,o,i,s,r,c,a,l,h,u,f,d,p,_,g,m,E,b,y,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,c=t._decorator,a=t.EventTarget,l=t.Prefab,h=t.instantiate,u=t.Vec2,f=t.Component},function(t){d=t.MatchSlot},function(t){p=t.WebUtils},function(t){_=t.matchConfigsLoadedEt,g=t.matchElementsPool,m=t.matchGridConfig},function(t){E=t.coreStateEt,b=t.coreStateMachine},function(t){y=t.CoreState},function(t){v=t.StateAction}],execute:function(){var S,M,w,x,z;r._RF.push({},"f7ed4h/MUhH+72c6zP909B/","match_grid",void 0);var C=c.ccclass,P=c.property,A=t("matchGridLoadedEt",new a);t("MatchGrid",(S=C("match-grid"),M=P({type:l}),S((z=e((x=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"slot",z,i(e)),e._slots=[],e}n(e,t);var r=e.prototype;return r.onLoad=function(){_.once((!0).toString(),this.loadSlots,this),E.on(y.MAIN,this.bindExpose,this)},r.onDestroy=function(){E.off(y.MAIN,this.bindExpose,this)},r.bindExpose=function(t){switch(t){case v.ENTER:this.slots.forEach((function(t){return t.forEach((function(t){return t.bind()}))}));break;case v.EXIT:this.slots.forEach((function(t){return t.forEach((function(t){return t.expose()}))}))}},r.setSlot=function(t){var e=g.get(t.element_id);this._slots[t.pos.x][t.pos.y].set(e)},r.loadSlots=function(){for(var t=this,e=0;e<m.size.x;e++){this._slots[e]=[];for(var n=0;n<m.size.y;n++){var o=h(this.slot);o.setParent(this.node);var i=o.getComponent(d);i.init(new u(e,n)),b.currentState==y.MAIN&&i.bind(),this._slots[e][n]=i}}p.get_with_auth("/match/user_all").then((function(e){return e.json().then((function(e){e.forEach(t.setSlot.bind(t)),A.emit((!0).toString())}))}))},s(e,[{key:"slots",get:function(){return this._slots}}]),e}(f)).prototype,"slot",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=x))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/match_move_in.ts",["cc"],(function(t){var i,e;return{setters:[function(t){i=t.cclegacy,e=t.Vec2}],execute:function(){i._RF.push({},"f78e4oQkhlO8oMaCPVfOmH8","match_move_in",void 0);t("MatchMoveIn",(function(t,i,c){this.pos=void 0,this.direction=void 0,this.pos=new e(t,i),this.direction=c}));i._RF.pop()}}}));

System.register("chunks:///_virtual/match_move.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"44b6bhjuq9DmqeGkklXK0Ax","match_move",void 0);t("MatchMove",function(t){return t[t.STARTED=0]="STARTED",t[t.SUCCESS=1]="SUCCESS",t[t.FAILED=2]="FAILED",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/match_mover.ts",["./rollupPluginModLoBabelHelpers.js","cc","./match_slot.ts","./match_swipe.ts","./web_utils.ts","./match_direction.ts","./match_move_in.ts","./match_config_loader.ts","./match_grid.ts","./funcs4.ts","./funcs.ts","./user_game_state.ts","./match_move.ts","./core_state_machine.ts","./core_states.ts","./state_action.ts","./match_clearer.ts","./match_clear.ts"],(function(t){var e,n,i,o,c,s,a,r,h,u,l,f,m,d,p,_,v,b,E,T,M,y,w,g,x,I,S,k,A,C,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,s=t._decorator,a=t.EventTarget,r=t.CCFloat,h=t.input,u=t.Input,l=t.UITransform,f=t.Tween,m=t.tween,d=t.Component},function(t){p=t.matchSwipeEt},function(t){_=t.MatchSwipe},function(t){v=t.WebUtils},function(t){b=t.directionFromVec2,E=t.applyToVec2},function(t){T=t.MatchMoveIn},function(t){M=t.matchGridConfig},function(t){y=t.MatchGrid},function(t){w=t.tweenWithPromiseCall},function(t){g=t.convertLocalToOtherLocal},function(t){x=t.userGameState},function(t){I=t.MatchMove},function(t){S=t.coreStateEt},function(t){k=t.CoreState},function(t){A=t.StateAction},function(t){C=t.clearEt},function(t){D=t.MatchClear}],execute:function(){var L,R,P,G,F,N,O;c._RF.push({},"f74e0bnQ1hHa5qA/TblMY0A","match_mover",void 0);var U=s.ccclass,V=s.property,z=t("moveEt",new a);t("MatchMover",(L=U("match-mover"),R=V({type:y}),P=V({type:r}),L((N=e((F=function(t){function e(){for(var e,n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return e=t.call.apply(t,[this].concat(c))||this,i(e,"matchGrid",N,o(e)),i(e,"moveTime",O,o(e)),e._fromMatchIndex=void 0,e._fromMatchIndexValid=void 0,e._bind=void 0,e._blocked=!1,e}n(e,t);var c=e.prototype;return c.onLoad=function(){S.on(k.MAIN,this.bindExpose,this),C.once(D.STARTED,this.block,this),C.once(D.EMPTY,this.unblock,this),C.once(D.CLEARED,this.unblock,this)},c.onDestroy=function(){S.off(k.MAIN,this.bindExpose,this)},c.bindExpose=function(t){switch(t){case A.ENTER:this.bind();break;case A.EXIT:this.expose()}},c.bind=function(){this._bind||(p.on(_.START,this.swipeStart,this),h.on(u.EventType.TOUCH_END,this.swipeEnd,this),this._bind=!0)},c.expose=function(){this._bind&&(p.off(_.START,this.swipeStart,this),h.off(u.EventType.TOUCH_END,this.swipeEnd,this),this._bind=!1)},c.swipeStart=function(t){this._fromMatchIndex=t,this._fromMatchIndexValid=!0},c.swipeEnd=function(t){if(this._fromMatchIndexValid&&!this._blocked)if(x.energy<=0)z.emit(I.FAILED);else{var e=b(t.getStartLocation(),t.getLocation());p.emit(_.END,e);var n=E(this._fromMatchIndex,e);M.outOfBounds(this._fromMatchIndex)||M.outOfBounds(n)||(this.block(),this._fromMatchIndexValid=!1,C.once(D.EMPTY,this.unblock,this),C.once(D.CLEARED,this.unblock,this),this.tryMove(this._fromMatchIndex,e))}},c.tryMove=function(t,e){var n=new Promise((function(n,i){v.post_with_auth("/match/move",new T(t.x,t.y,e)).then((function(t){return t.json().then((function(t){t.result?(x.updateEnergy(t.energy),n()):i()}))}))}));z.emit(I.STARTED),this.move(t,e,n)},c.move=function(t,e,n){var i=E(t,e),o=this.matchGrid.slots[t.x][t.y],c=this.matchGrid.slots[i.x][i.y],s=o.getComponent(l),a=c.getComponent(l),r=o.element,h=c.element,u=this.elementMoveTween(r.node,h.node.position,s,a),m=this.elementMoveTween(h.node,r.node.position,a,s);Promise.all([w(u),w(m),n]).then((function(){o.set(h),c.set(r),z.emit(I.SUCCESS,t,i)})).catch((function(){f.stopAllByTag(11),o.set(r),c.set(h),z.emit(I.FAILED)}))},c.block=function(){this._blocked=!0},c.unblock=function(){this._blocked=!1},c.elementMoveTween=function(t,e,n,i){var o=g(e,n,i);return m(t.position).to(this.moveTime,o,{easing:"backOut",onUpdate:function(e,n){t.setPosition(e)}}).tag(11)},e}(d)).prototype,"matchGrid",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(F.prototype,"moveTime",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=F))||G));c._RF.pop()}}}));

System.register("chunks:///_virtual/match_slot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./match_swipe.ts","./funcs.ts"],(function(t){var e,n,i,o,s,r,c,a,u,h,l,f;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,o=t._decorator,s=t.EventTarget,r=t.UITransform,c=t.input,a=t.Input,u=t.Vec3,h=t.Component},function(t){l=t.MatchSwipe},function(t){f=t.inBounds}],execute:function(){var p;i._RF.push({},"ce9b8rnlZ5JU6Y1kZgyb6mE","match_slot",void 0);var d=o.ccclass,_=(o.property,t("matchSwipeEt",new s));t("MatchSlot",d("match-slot")(p=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._uiTransform=void 0,e._index=void 0,e._element=void 0,e.initialized=void 0,e}e(i,t);var o=i.prototype;return o.onLoad=function(){this._uiTransform=this.node.getComponent(r)},o.bind=function(){c.on(a.EventType.TOUCH_START,this.swipeStart,this)},o.expose=function(){c.off(a.EventType.TOUCH_START,this.swipeStart,this)},o.init=function(t){this.initialized||(this._index=t,this.initialized=!0)},o.set=function(t){this._element=t,this._element.node.setPosition(new u),this._element.node.setParent(this.node)},o.swipeStart=function(t){f(this._uiTransform,t)&&_.emit(l.START,this._index)},n(i,[{key:"index",get:function(){return this._index}},{key:"element",get:function(){return this._element}}]),i}(h))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/match_swipe.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"6831dKERAtDFYn+m3BWDdun","match_swipe",void 0);t("MatchSwipe",function(t){return t[t.START=0]="START",t[t.END=1]="END",t}({}));c._RF.pop()}}}));

System.register("chunks:///_virtual/match_user_slot_out.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"525825gMVpMKIeVuTWmIVC6","match_user_slot_out",void 0);t("MatchUserSlotOut",(function(){this.pos=void 0,this.element_id=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/new_referral_in.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"a33fdubh6lM9a890XoCpo4J","new_referral_in",void 0);e("NewReferralIn",(function(e,r){this.referred_tg_id=void 0,this.referred_by_tg_id=void 0,this.referred_tg_id=e,this.referred_by_tg_id=r}));r._RF.pop()}}}));

System.register("chunks:///_virtual/node_state_action.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e._decorator,r=e.Node}],execute:function(){var c,a,l,u,s,p;n._RF.push({},"e3c19Dod1hB9bXU0XaguBfn","node_state_action",void 0);var d=o.ccclass,f=o.property;e("NodeStateAction",(c=d("node-state-action"),a=f({type:r}),c((s=t((u=function(){i(this,"Node",s,this),i(this,"ActiveOnEnter",p,this)}).prototype,"Node",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=t(u.prototype,"ActiveOnEnter",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=u))||l));n._RF.pop()}}}));

System.register("chunks:///_virtual/place_view_config.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,r,t,n,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){t=e.cclegacy,n=e._decorator,p=e.SpriteFrame}],execute:function(){var a,l,c,o,u,s,f;t._RF.push({},"37e67ZpgmdOtK+WrDGEpJ+d","place_view_config",void 0);var g=n.ccclass,y=n.property;e("PlaceViewConfing",(a=g("place-view-config"),l=y({type:p}),c=y({type:p}),a((s=i((u=function(){r(this,"panelSprite",s,this),r(this,"frameSprite",f,this)}).prototype,"panelSprite",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(u.prototype,"frameSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=u))||o));t._RF.pop()}}}));

System.register("chunks:///_virtual/pool.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"02f290F8UhJq5mXgz/vsIW6","pool",void 0);t("Pool",function(){function t(t){this.factory=void 0,this._pool=[],this.factory=t}var o=t.prototype;return o.get=function(){return this._pool.length<1&&this.add(),this._pool.shift()},o.put=function(t){this._pool.push(t)},o.add=function(){var t=this.factory();this._pool.push(t)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/rating_loader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts","./core_state_machine.ts","./core_states.ts","./rating_panel.ts","./state_action.ts"],(function(t){var e,n,o,r,a,i,s,l,u,c,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,i=t._decorator,s=t.Component},function(t){l=t.WebUtils},function(t){u=t.coreStateEt},function(t){c=t.CoreState},function(t){f=t.RatingPanel},function(t){p=t.StateAction}],execute:function(){var h,g,_,d,y,v,D;a._RF.push({},"fa7571aOWpAxLX2/hQVd8kT","rating_loader",void 0);var P=i.ccclass,b=i.property;t("RatingLoader",(h=P("rating-loader"),g=b({type:[f]}),_=b({type:f}),h((v=e((y=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,o(e,"topFourPanels",v,r(e)),o(e,"selfPanel",D,r(e)),e}n(e,t);var a=e.prototype;return a.onLoad=function(){u.on(c.LEADERBOARD,this.load,this)},a.onDestroy=function(){u.off(c.LEADERBOARD,this.load,this)},a.load=function(t){var e=this;t!=p.EXIT&&l.get_with_auth("/rating/score").then((function(t){return t.json().then((function(t){for(var n=t,o=0;o<e.topFourPanels.length;o++){var r=o<n.top_four.length;e.topFourPanels[o].updateData(r?n.top_four[o].username:"---",r?n.top_four[o].score.toString():"---")}e.selfPanel.updateData(n.self.username,n.self.score.toString(),n.self.place)}))}))},e}(s)).prototype,"topFourPanels",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(y.prototype,"selfPanel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/rating_out.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"562a7vkuE9CHr0g0CZ89p8P","rating_out",void 0);t("RatingOut",(function(){this.top_four=void 0,this.self=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/rating_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./place_view_config.ts"],(function(e){var t,i,r,a,n,l,p,s,o,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,p=e.Sprite,s=e.Label,o=e.math,c=e.Component},function(e){u=e.PlaceViewConfing}],execute:function(){var g,b,f,h,m,y,S,w,L,v,P,z,d,V,_,F;n._RF.push({},"cc6f4hUMzZIvILLZbDsu+aw","rating_panel",void 0);var D=l.ccclass,I=l.property;e("RatingPanel",(g=D("rating-panel"),b=I({type:p}),f=I({type:p}),h=I({type:s}),m=I({type:s}),y=I({type:s}),S=I({type:[u]}),g((v=t((L=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"panelSprite",v,a(t)),r(t,"frameSprite",P,a(t)),r(t,"usernameLabel",z,a(t)),r(t,"scoreLabel",d,a(t)),r(t,"placeLabel",V,a(t)),r(t,"targetViewPlace",_,a(t)),r(t,"ratingsSprites",F,a(t)),t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.panelSprite.spriteFrame=this.ratingsSprites[this.targetViewPlace-1].panelSprite,this.frameSprite.spriteFrame=this.ratingsSprites[this.targetViewPlace-1].frameSprite},n.updateData=function(e,t,i){void 0===i&&(i=this.targetViewPlace);var r=o.clamp(i,1,4);this.targetViewPlace!=r&&(this.panelSprite.spriteFrame=this.ratingsSprites[r-1].panelSprite,this.frameSprite.spriteFrame=this.ratingsSprites[r-1].frameSprite,this.targetViewPlace=i),this.usernameLabel.string=e,this.scoreLabel.string=t,this.placeLabel.string=i.toString()},t}(c)).prototype,"panelSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(L.prototype,"frameSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(L.prototype,"usernameLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(L.prototype,"scoreLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(L.prototype,"placeLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(L.prototype,"targetViewPlace",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=t(L.prototype,"ratingsSprites",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=L))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/referral_link_generator.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){e("generate_referral_link",(function(e){return"https://t.me/ArchemistryBot/match?startapp="+e})),r._RF.push({},"c0443uKGppHbJ61PT+yzEys","referral_link_generator",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/referral_out.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9a1a148ARtHkoJK1DwfnxON","referral_out",void 0);e("ReferralOut",(function(){this.username=void 0,this.score=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/rofl_task_details_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./task_panel.ts","./core_state_machine.ts","./core_states.ts","./state_action.ts","./fade.ts"],(function(t){var e,i,n,a,s,c,r,o,l,h,k,d,p,u,f,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,c=t._decorator,r=t.Button,o=t.Label,l=t.EventHandler,h=t.Component},function(t){k=t.dailyTaskOpenEt},function(t){d=t.coreStateEt},function(t){p=t.CoreState},function(t){u=t.StateAction},function(t){f=t.fadeEt,_=t.fadeClickEt}],execute:function(){var g,m,C,b,v,T,E;s._RF.push({},"f4976d1CSpF/b1mPOCMeO8t","rofl_task_details_panel",void 0);var y=c.ccclass,S=c.property;t("RoflTaskDetailsPanel",(g=y("rofl-task-details-panel"),m=S({type:r}),C=S({type:o}),g((T=e((v=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s))||this,n(e,"checkClaimButton",T,a(e)),n(e,"chechClaimLabel",E,a(e)),e._checkHandler=new l,e._claimHandler=new l,e._targetTask=void 0,e._checkCallback=void 0,e._claimCallback=void 0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this._checkHandler.target=this.node,this._checkHandler.component="rofl-task-details-panel",this._checkHandler.handler="check",this._claimHandler.target=this.node,this._claimHandler.component="rofl-task-details-panel",this._claimHandler.handler="claim",d.on(p.TASKS,this.bindExpose,this),this.node.active=!1},s.onDestroy=function(){d.off(p.TASKS,this.bindExpose,this)},s.bindExpose=function(t){switch(t){case u.ENTER:this.bind();break;case u.EXIT:this.expose()}},s.bind=function(){k.on((!0).toString(),this.open,this)},s.expose=function(){k.off((!0).toString(),this.open,this)},s.open=function(t,e,i){1==t.type&&(this._targetTask=t,this._checkCallback=e,this._claimCallback=i,this.node.active=!0,this.drawCheckClaim(),f.emit((!0).toString()),this.bindInner())},s.close=function(t){this.node.active=!1,f.emit((!1).toString()),this.exposeInner()},s.refresh=function(){this.drawCheckClaim(),this.exposeInner(),this.bindInner()},s.bindInner=function(){this._targetTask.progress<this._targetTask.target?this.checkClaimButton.clickEvents.push(this._checkHandler):this._targetTask.progress==this._targetTask.target&&this.checkClaimButton.clickEvents.push(this._claimHandler),_.on((!0).toString(),this.close,this)},s.exposeInner=function(){var t=this.checkClaimButton.clickEvents.indexOf(this._checkHandler);t>=0&&this.checkClaimButton.clickEvents.splice(t,1);var e=this.checkClaimButton.clickEvents.indexOf(this._claimHandler);e>=0&&this.checkClaimButton.clickEvents.splice(e,1),_.off((!0).toString(),this.close,this)},s.drawCheckClaim=function(){this._targetTask.progress<this._targetTask.target?this.chechClaimLabel.string="Check":this._targetTask.progress>=this._targetTask.target&&(this.chechClaimLabel.string="Claim"),this.checkClaimButton.interactable=this._targetTask.progress<=this._targetTask.target},s.check=function(){var t=this;this._checkCallback().then((function(e){e&&t.node.active&&t.refresh()}))},s.claim=function(){var t=this;this._claimCallback().then((function(e){e&&t.node.active&&t.refresh()}))},e}(h)).prototype,"checkClaimButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(v.prototype,"chechClaimLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=v))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/score_counter_label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./user_game_state.ts","./state_action.ts","./core_state_machine.ts","./core_states.ts"],(function(t){var e,i,o,n,r,s,a,c,l,u,p,f,h,b,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.CCFloat,c=t.Label,l=t.tween,u=t.Component},function(t){p=t.userGameState,f=t.scoreUpdatedEt},function(t){h=t.StateAction},function(t){b=t.coreStateEt},function(t){d=t.CoreState}],execute:function(){var _,y,g,S,m,v,w;r._RF.push({},"caf07TqqyZNs7R0qOG1ky3W","score_counter_label",void 0);var z=s.ccclass,E=s.property;t("ScoreCounterLabel",(_=z("score-counter-label"),y=E({type:a}),g=E({type:a}),_((v=e((m=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"popTime",v,n(e)),o(e,"scaleMultiplier",w,n(e)),e._label=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this._label=this.node.getComponent(c),b.on(d.MAIN,this.bindExpose,this)},r.onDestroy=function(){b.off(d.MAIN,this.bindExpose,this)},r.bindExpose=function(t){switch(t){case h.ENTER:p.score&&this.draw(p.score),this.bind();break;case h.EXIT:this.expose()}},r.bind=function(){f.on((!0).toString(),this.draw,this)},r.expose=function(){f.off((!0).toString(),this.draw,this)},r.draw=function(t){var e=this._label.fontSize,i=this._label.fontSize*this.scaleMultiplier;l(this._label).to(this.popTime,{fontSize:i},{easing:"quadOut"}).to(this.popTime,{fontSize:e},{easing:"quadOut"}).start(),this._label.string=t.toString()},e}(u)).prototype,"popTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(m.prototype,"scaleMultiplier",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=m))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/shop_energy_item_out.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"74bcdUn1ORB2p8niO8LGrth","shop_energy_item_out",void 0);t("ShopEnergyItemOut",(function(){this.type=void 0,this.amount=void 0,this.cost=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/shop_energy_item_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./energy_icons_config.ts"],(function(e){var t,n,i,o,r,a,l,s,u,c,p,y,h,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.EventTarget,s=e.Sprite,u=e.RichText,c=e.Button,p=e.UITransform,y=e.EventHandler,h=e.Node,b=e.Component},function(e){g=e.EnergyIconsConfig}],execute:function(){var m,f,d,E,_,v,L,S,z,I,w,H,B;r._RF.push({},"bc955xi+y5FUJ3QaX4B1EYZ","shop_energy_item_panel",void 0);var T=a.ccclass,x=a.property,D=e("buyEnergyItemEt",new l);e("ShopEnergyItemPanel",(m=T("shop-energy-item-panel"),f=x({type:s}),d=x({type:u}),E=x({type:u}),_=x({type:c}),v=x({type:p}),m((z=t((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"iconSpite",z,o(t)),i(t,"amountLabel",I,o(t)),i(t,"costLabel",w,o(t)),i(t,"buyButton",H,o(t)),i(t,"amountLabelUITransform",B,o(t)),t._buyEventHandler=new y,t._targetEnergyItem=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this._buyEventHandler.target=this.node,this._buyEventHandler.component="shop-energy-item-panel",this._buyEventHandler.handler="buy"},r.bind=function(){this.buyButton.clickEvents.push(this._buyEventHandler),this.amountLabel.node.on(h.EventType.SIZE_CHANGED,this.updateSizes,this)},r.expose=function(){var e=this.buyButton.clickEvents.indexOf(this._buyEventHandler);this.buyButton.clickEvents.splice(e,1),this.amountLabel.node.off(h.EventType.SIZE_CHANGED,this.updateSizes,this)},r.updateData=function(e){this._targetEnergyItem=e,this.iconSpite.spriteFrame=g.getSpriteByCode(e.type),this.amountLabel.string=e.amount+"<img src='energy_icon' width="+this.amountLabel.fontSize+" height="+this.amountLabel.fontSize+" align=center />",this.costLabel.string=e.cost+"<img src='soft_icon' width="+this.costLabel.fontSize+" height="+this.costLabel.fontSize+" align=center />"},r.updateSizes=function(){this.amountLabel.maxWidth=this.amountLabelUITransform.width},r.buy=function(){D.emit((!0).toString(),this._targetEnergyItem.type)},t}(b)).prototype,"iconSpite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(S.prototype,"amountLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(S.prototype,"costLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(S.prototype,"buyButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(S.prototype,"amountLabelUITransform",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=S))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/shop_loader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shop_energy_item_panel.ts","./web_utils.ts","./fade.ts","./haptic_tg.ts","./user_game_state.ts"],(function(e){var t,n,o,r,i,a,s,u,l,c,p,f,h,y,g,d,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,u=e.Node,l=e.Prefab,c=e.instantiate,p=e.Component},function(e){f=e.buyEnergyItemEt,h=e.ShopEnergyItemPanel},function(e){y=e.WebUtils},function(e){g=e.fadeEt,d=e.fadeClickEt},function(e){_=e.HapticTg},function(e){b=e.userGameState}],execute:function(){var m,v,P,I,S,E,w;a._RF.push({},"7837dE4UlxGnqU+MQ94IPYb","shop_loader",void 0);var x=s.ccclass,L=s.property;e("ShopLoader",(m=x("shop-loader"),v=L({type:u}),P=L({type:l}),m((E=t((S=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"holder",E,r(t)),o(t,"energyItemPanelPrefab",w,r(t)),t._energyItemsPanels=new Map,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.node.active=!1},a.open=function(){this.node.active=!0,g.emit((!0).toString()),this.bind(),this.load()},a.close=function(){this.node.active=!1,g.emit((!1).toString()),this.expose()},a.bind=function(){for(var e,t=i(this._energyItemsPanels);!(e=t()).done;){var n=e.value;n[0];n[1].bind()}f.on((!0).toString(),this.buy,this),d.on((!0).toString(),this.close,this)},a.expose=function(){for(var e,t=i(this._energyItemsPanels);!(e=t()).done;){var n=e.value;n[0];n[1].expose()}f.off((!0).toString(),this.buy,this),d.off((!0).toString(),this.close,this)},a.load=function(){var e=this;y.get_with_auth("/shop/energy").then((function(t){return t.json().then((function(t){var n=t;n.sort((function(e,t){return e.type-t.type})),n.forEach((function(t){if(!e._energyItemsPanels.has(t.type)){var n=c(e.energyItemPanelPrefab).getComponent(h);e._energyItemsPanels.set(t.type,n),n.bind(),n.node.parent=e.holder}e._energyItemsPanels.get(t.type).updateData(t)}))}))}))},a.buy=function(e){y.post_with_auth("/shop/buy_energy",{type:e}).then((function(e){return e.json().then((function(e){e.result?(b.updateSoft(e.soft),b.updateEnergy(e.energy),_.success()):_.error()}))}))},t}(p)).prototype,"holder",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(S.prototype,"energyItemPanelPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=S))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/shop_opener.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shop_loader.ts","./core_state_machine.ts","./core_states.ts","./state_action.ts"],(function(e){var t,o,n,i,s,r,p,c,a,h,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,p=e.Node,c=e.Component},function(e){a=e.ShopLoader},function(e){h=e.coreStateEt},function(e){u=e.CoreState},function(e){f=e.StateAction}],execute:function(){var l,d,y,_,b;s._RF.push({},"62eefJY0elHoLpQhO2qbR3p","shop_opener",void 0);var E=r.ccclass,v=r.property;e("ShopOpener",(l=E("shop-opener"),d=v({type:a}),l((b=t((_=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"shopLoader",b,i(t)),t}o(t,e);var s=t.prototype;return s.onLoad=function(){h.on(u.MAIN,this.bindExpose,this)},s.onDestroy=function(){h.off(u.MAIN,this.bindExpose,this)},s.bindExpose=function(e){switch(e){case f.ENTER:this.bind();break;case f.EXIT:this.expose()}},s.bind=function(){this.node.on(p.EventType.TOUCH_END,this.open,this)},s.expose=function(){this.node.off(p.EventType.TOUCH_END,this.open,this)},s.open=function(){this.shopLoader.open()},t}(c)).prototype,"shopLoader",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=_))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/simple_vec2.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"44303xoOJNL2JPNezhsADd1","simple_vec2",void 0);e("SimpleVec2",(function(e,i){this.x=void 0,this.y=void 0,this.x=e,this.y=i}));i._RF.pop()}}}));

System.register("chunks:///_virtual/socail_task_details_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./task_panel.ts","./core_state_machine.ts","./core_states.ts","./state_action.ts","./fade.ts"],(function(t){var e,i,a,n,s,r,c,o,l,h,u,p,k,d,_,g,f,m,b,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Sprite,o=t.Label,l=t.Button,h=t.EventHandler,u=t.SpriteFrame,p=t.Texture2D,k=t.assetManager,d=t.Component},function(t){_=t.socialTaskOpenEt},function(t){g=t.coreStateEt},function(t){f=t.CoreState},function(t){m=t.StateAction},function(t){b=t.fadeEt,v=t.fadeClickEt}],execute:function(){var C,T,E,H,S,y,w,x,B,L,I,z,F;s._RF.push({},"41be3aWtfBLNrQUQNgEU3Uw","socail_task_details_panel",void 0);var D=r.ccclass,U=r.property;t("SocialTaskDetailsPanel",(C=D("social-task-details-panel"),T=U({type:c}),E=U({type:o}),H=U({type:l}),S=U({type:o}),y=U({type:l}),C((B=e((x=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,a(e,"iconSprite",B,n(e)),a(e,"descriptionLabel",L,n(e)),a(e,"checkClaimButton",I,n(e)),a(e,"checkClaimLabel",z,n(e)),a(e,"goButton",F,n(e)),e._claimHandler=new h,e._checkHandler=new h,e._goHandler=new h,e._targetTask=void 0,e._checkCallback=void 0,e._claimCallback=void 0,e._iconUrl=void 0,e._spriteFrame=new u,e._texture=new p,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this._checkHandler.target=this.node,this._checkHandler.component="social-task-details-panel",this._checkHandler.handler="check",this._claimHandler.target=this.node,this._claimHandler.component="social-task-details-panel",this._claimHandler.handler="claim",this._goHandler.target=this.node,this._goHandler.component="social-task-details-panel",this._goHandler.handler="go",g.on(f.TASKS,this.bindExpose,this),this.node.active=!1},s.onDestroy=function(){g.off(f.TASKS,this.bindExpose,this)},s.bindExpose=function(t){switch(t){case m.ENTER:this.bind();break;case m.EXIT:this.expose()}},s.bind=function(){_.on((!0).toString(),this.open,this)},s.expose=function(){_.off((!0).toString(),this.open,this)},s.open=function(t,e,i){this._targetTask=t,this._checkCallback=e,this._claimCallback=i,this.node.active=!0,b.emit((!0).toString()),this.draw(),this.bindInner()},s.close=function(){this.node.active=!1,b.emit((!1).toString()),this.exposeInner()},s.refresh=function(){this.drawCheckClaim(),this.exposeInner(),this.bindInner()},s.bindInner=function(){this._targetTask.progress<this._targetTask.target?this.checkClaimButton.clickEvents.push(this._checkHandler):this._targetTask.progress==this._targetTask.target&&this.checkClaimButton.clickEvents.push(this._claimHandler),this.goButton.clickEvents.push(this._goHandler),v.on((!0).toString(),this.close,this)},s.exposeInner=function(){var t=this.checkClaimButton.clickEvents.indexOf(this._checkHandler);t>=0&&this.checkClaimButton.clickEvents.splice(t,1);var e=this.checkClaimButton.clickEvents.indexOf(this._claimHandler);e>=0&&this.checkClaimButton.clickEvents.splice(e,1);var i=this.goButton.clickEvents.indexOf(this._goHandler);this.goButton.clickEvents.splice(i,1),v.off((!0).toString(),this.close,this)},s.draw=function(){var t=this;this._targetTask.icon_url!=this._iconUrl&&(this._iconUrl=this._targetTask.icon_url,k.loadRemote(this._targetTask.icon_url,(function(e,i){e||(t._texture.image=i,t._spriteFrame.texture=t._texture,t.iconSprite.spriteFrame=t._spriteFrame)}))),this.descriptionLabel.string=this._targetTask.description,this.drawCheckClaim()},s.drawCheckClaim=function(){this._targetTask.progress<this._targetTask.target?this.checkClaimLabel.string="Check":this._targetTask.progress>=this._targetTask.target&&(this.checkClaimLabel.string="Claim"),this.checkClaimButton.interactable=this._targetTask.progress<=this._targetTask.target},s.check=function(){var t=this;this._checkCallback().then((function(e){e&&t.node.active&&t.refresh()}))},s.claim=function(){var t=this;this._claimCallback().then((function(e){e&&t.node.active&&t.refresh()}))},s.go=function(){console.log("go"),globalThis.open(this._targetTask.target_url)},e}(d)).prototype,"iconSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(x.prototype,"descriptionLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(x.prototype,"checkClaimButton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(x.prototype,"checkClaimLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(x.prototype,"goButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=x))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/social_task_out.ts",["./rollupPluginModLoBabelHelpers.js","cc","./daily_task_out.ts"],(function(t){var o,n,i;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.DailyTaskOut}],execute:function(){n._RF.push({},"963dc1HMB5Fy4FOo4KJ9kCl","social_task_out",void 0);t("SocialTaskOut",function(t){function n(){for(var o,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return(o=t.call.apply(t,[this].concat(i))||this).target_url=void 0,o.icon_url=void 0,o}return o(n,t),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/soft_counter_label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./user_game_state.ts"],(function(t){var o,n,e,r,i,s;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,r=t.Label,i=t.Component},function(t){s=t.softUpdatedEt}],execute:function(){var a;n._RF.push({},"4df71+KyaVCx58pSxsY0HTo","soft_counter_label",void 0);var c=e.ccclass;e.property,t("SoftCounterLabel",c("soft-counter-label")(a=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(o=t.call.apply(t,[this].concat(e))||this)._label=void 0,o}o(n,t);var e=n.prototype;return e.onLoad=function(){this._label=this.node.getComponent(r),this.bind()},e.onDestroy=function(){this.expose()},e.bind=function(){s.on((!0).toString(),this.draw,this)},e.expose=function(){s.off((!0).toString(),this.draw,this)},e.draw=function(t){this._label.string=t.toString()},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/state_action.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e6737ymqJxO06jAZtT87EAi","state_action",void 0);t("StateAction",function(t){return t[t.ENTER=0]="ENTER",t[t.EXIT=1]="EXIT",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/task_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts","./user_game_state.ts","./haptic_tg.ts","./tasks_icons_config.ts"],(function(t){var e,i,a,r,s,n,o,l,c,p,u,h,g,_,d,f,m,T,k,b,w,y,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,o=t.EventTarget,l=t.UITransform,c=t.Sprite,p=t.Label,u=t.RichText,h=t.Button,g=t.Node,_=t.JsonAsset,d=t.EventHandler,f=t.SpriteFrame,m=t.Texture2D,T=t.assetManager,k=t.Component},function(t){b=t.WebUtils},function(t){w=t.userGameState},function(t){y=t.HapticTg},function(t){v=t.TasksIconsConfig}],execute:function(){var E,S,H,L,z,B,I,U,P,x,C,D,F,N,O,R,j;s._RF.push({},"48ff1m4bHRMCquBN95ew8tI","task_panel",void 0);var A=n.ccclass,G=n.property,M=t("dailyTaskOpenEt",new o),W=t("socialTaskOpenEt",new o);t("TaskPanel",(E=A("task-panel"),S=G({type:l}),H=G({type:c}),L=G({type:p}),z=G({type:u}),B=G({type:h}),I=G({type:g}),U=G({type:_}),E((C=e((x=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,a(e,"rewardsPanelUITransform",C,r(e)),a(e,"iconSprite",D,r(e)),a(e,"descriptionLabel",F,r(e)),a(e,"rewardLabel",N,r(e)),a(e,"claimButton",O,r(e)),a(e,"arrow",R,r(e)),a(e,"rewards_icons_config",j,r(e)),e._targetTask=void 0,e._iconUrl=void 0,e._claimHandler=new d,e._spriteFrame=new f,e._texture=new m,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this._claimHandler.target=this.node,this._claimHandler.component="task-panel",this._claimHandler.handler="claim"},s.bind=function(){this.node.on(g.EventType.TOUCH_END,this.open,this),this.claimButton.clickEvents.push(this._claimHandler),this.rewardsPanelUITransform.node.on(g.EventType.SIZE_CHANGED,this.updateSizes,this)},s.expose=function(){this.node.off(g.EventType.TOUCH_END,this.open,this);var t=this.claimButton.clickEvents.indexOf(this._claimHandler);this.claimButton.clickEvents.splice(t,1),this.rewardsPanelUITransform.node.off(g.EventType.SIZE_CHANGED,this.updateSizes,this)},s.updateTask=function(t){var e,i=this;this._targetTask=t,e=this._targetTask.progress<=this._targetTask.target?this._targetTask.progress+"/"+this._targetTask.target:"Done";var a=this._targetTask.description+" ("+e+")",r=this.rewards_icons_config.json.map.find((function(t){return t.code==i._targetTask.reward_type})).sprite_title,s="+"+this._targetTask.reward+"<img src='"+r+"' width="+this.rewardLabel.fontSize+" height="+this.rewardLabel.fontSize+" align=center/>";if(this.updateLabels(a,s),this.updateClaimButton(this._targetTask.progress>=this._targetTask.target,this._targetTask.progress==this._targetTask.target),this.arrow.active=this._targetTask.type>100,this._targetTask.type<100)v.loaded&&(this.iconSprite.spriteFrame=v.getIconByType(this._targetTask.type));else{var n=this._targetTask;n.icon_url!=this._iconUrl&&(this._iconUrl=n.icon_url,T.loadRemote(n.icon_url,(function(t,e){t||(i._texture.image=e,i._spriteFrame.texture=i._texture,i.iconSprite.spriteFrame=i._spriteFrame)})))}},s.updateLabels=function(t,e){this.descriptionLabel.string=t,this.rewardLabel.string=e},s.updateClaimButton=function(t,e){this.claimButton.node.active=t,this.claimButton.interactable=e},s.updateSizes=function(){this.rewardLabel.maxWidth=this.rewardsPanelUITransform.width,this.rewardsPanelUITransform.height=this.rewardLabel.lineHeight},s.open=function(){this._targetTask.type<100?M.emit((!0).toString(),this._targetTask,this.check.bind(this),this.claim.bind(this)):W.emit((!0).toString(),this._targetTask,this.check.bind(this),this.claim.bind(this))},s.check=function(){var t=this;if(this._targetTask.type<100&&1!=this._targetTask.type)return new Promise((function(t,e){e()}));var e="";return e=1==this._targetTask.type?"/tasks/rofl":"/tasks/social/validate/"+this._targetTask.type,new Promise((function(i,a){b.get_with_auth(e).then((function(e){return e.json().then((function(e){e.progress!=t._targetTask.progress?(t._targetTask.progress=t._targetTask.target,console.log(t._targetTask.progress),t.updateTask(t._targetTask),i(!0)):i(!1)}))}))}))},s.claim=function(){var t=this;return new Promise((function(e,i){b.post_with_auth("/tasks/claim/"+t._targetTask.type,{}).then((function(i){return i.json().then((function(i){if(!i.result)return y.error(),void e(!1);w.updateEnergy(i.energy),w.updateSoft(i.soft),w.updateHard(i.hard),t._targetTask.progress=t._targetTask.target+1,t.updateClaimButton(!0,!1),y.success(),e(!0)}))}))}))},e}(k)).prototype,"rewardsPanelUITransform",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(x.prototype,"iconSprite",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(x.prototype,"descriptionLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(x.prototype,"rewardLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(x.prototype,"claimButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(x.prototype,"arrow",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(x.prototype,"rewards_icons_config",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=x))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/tasks_icons_config.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,s,c,i,r;return{setters:[function(n){t=n.createClass,e=n.createForOfIteratorHelperLoose},function(n){o=n.cclegacy,s=n.EventTarget,c=n.resources,i=n.JsonAsset,r=n.SpriteFrame}],execute:function(){o._RF.push({},"bd3497299dLp752gNZLACEB","tasks_icons_config",void 0);var a=n("loadedTasksIconsEt",new s),u=n("TasksIconsConfig",function(){function n(){}return n.getIconByType=function(n){return this._typeIconMap.get(n)},n.load=function(){var n=this;return new Promise((function(t,o){c.load("tasks/configs/tasks-icons-config",i,(function(s,c){for(var i,r=[],u=e(c.json.icons);!(i=u()).done;){var f=i.value;r.push(n.mapIcon(f.type,f.sprite_path))}Promise.all(r).then((function(){n._loaded=!0,a.emit((!0).toString()),t()})).catch((function(){o()}))}))}))},n.mapIcon=function(n,t){var e=this;return new Promise((function(o,s){c.load(t,r,(function(t,c){t?s():(e._typeIconMap.set(n,c),o())}))}))},t(n,null,[{key:"loaded",get:function(){return this._loaded}}]),n}());u._typeIconMap=new Map,u._loaded=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/tasks_loader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./state_action.ts","./web_utils.ts","./task_panel.ts","./core_state_machine.ts","./core_states.ts"],(function(e){var t,a,n,s,o,i,r,l,c,u,p,d,f,y,h,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,r=e._decorator,l=e.Node,c=e.Prefab,u=e.instantiate,p=e.Component},function(e){d=e.StateAction},function(e){f=e.WebUtils},function(e){y=e.TaskPanel},function(e){h=e.coreStateEt},function(e){k=e.CoreState}],execute:function(){var _,b,P,v,T,g,w,m,E;i._RF.push({},"f0da1RlC8RPRa4QI3Bc1ipm","tasks_loader",void 0);var x=r.ccclass,H=r.property;e("TasksLoader",(_=x("tasks-loader"),b=H({type:l}),P=H({type:l}),v=H({type:c}),_((w=t((g=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"dailyHolder",w,s(t)),n(t,"socialHolder",m,s(t)),n(t,"taskPanelPrefab",E,s(t)),t._dailyTasksPanels=new Map,t._socialTasksPanels=new Map,t}a(t,e);var i=t.prototype;return i.onLoad=function(){h.on(k.TASKS,this.bindExpose,this)},i.onDestroy=function(){h.off(k.TASKS,this.bindExpose,this)},i.bindExpose=function(e){switch(e){case d.ENTER:this.bind(),this.load();break;case d.EXIT:this.expose()}},i.bind=function(){for(var e,t=o(this._dailyTasksPanels);!(e=t()).done;){var a=e.value;a[0];a[1].bind()}for(var n,s=o(this._socialTasksPanels);!(n=s()).done;){var i=n.value;i[0];i[1].bind()}},i.expose=function(){for(var e,t=o(this._dailyTasksPanels);!(e=t()).done;){var a=e.value;a[0];a[1].expose()}for(var n,s=o(this._socialTasksPanels);!(n=s()).done;){var i=n.value;i[0];i[1].expose()}},i.load=function(){var e=this;f.get_with_auth("/tasks/daily").then((function(t){return t.json().then((function(t){var a=t;a.sort((function(e,t){return e.type-t.type})),a.forEach((function(t){if(!e._dailyTasksPanels.has(t.type)){var a=u(e.taskPanelPrefab).getComponent(y);e._dailyTasksPanels.set(t.type,a),a.bind(),a.node.parent=e.dailyHolder}e._dailyTasksPanels.get(t.type).updateTask(t)}))}))})),f.get_with_auth("/tasks/social").then((function(t){return t.json().then((function(t){t.forEach((function(t){if(!e._socialTasksPanels.get(t.type)){var a=u(e.taskPanelPrefab).getComponent(y);e._socialTasksPanels.set(t.type,a),a.bind(),a.node.parent=e.socialHolder}e._socialTasksPanels.get(t.type).updateTask(t)}))}))}))},t}(p)).prototype,"dailyHolder",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(g.prototype,"socialHolder",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(g.prototype,"taskPanelPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=g))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/user_game_state.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web_utils.ts"],(function(t){var e,r,n,i;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,n=t.EventTarget},function(t){i=t.WebUtils}],execute:function(){r._RF.push({},"fa205alI79I/JR+KI02530u","user_game_state",void 0);var s=t("softUpdatedEt",new n),u=t("hardUpdatedEt",new n),o=t("scoreUpdatedEt",new n),a=t("energyUpdatedEt",new n),c=t("UserGameState",function(){function t(){this._softCurrency=void 0,this._hardCurrency=void 0,this._score=void 0,this._energy=void 0,this._maxEnergy=void 0}var r=t.prototype;return r.load=function(){var t=this;return i.get_with_auth("/user/state").then((function(e){return e.json().then((function(e){t.updateHard(e.hard),t.updateSoft(e.soft),t.updateScore(e.score),t.updateEnergy(e.energy,e.max_energy)}))}))},r.updateSoft=function(t){this._softCurrency=t,s.emit((!0).toString(),this._softCurrency)},r.updateHard=function(t){this._hardCurrency=t,u.emit((!0).toString(),this._hardCurrency)},r.updateScore=function(t){this._score=t,o.emit((!0).toString(),this._score)},r.updateEnergy=function(t,e){void 0===e&&(e=-1),this._energy=t,e>0&&(this._maxEnergy=e),a.emit((!0).toString(),this._energy,this._maxEnergy)},e(t,[{key:"softCurrency",get:function(){return this._softCurrency}},{key:"hardCurrency",get:function(){return this._softCurrency}},{key:"score",get:function(){return this._score}},{key:"energy",get:function(){return this._energy}},{key:"maxEnergy",get:function(){return this._maxEnergy}}]),t}());t("userGameState",new c);r._RF.pop()}}}));

System.register("chunks:///_virtual/user_rating.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"bbd4fu6NoJHu5xk+3IKy8JW","user_rating",void 0);t("UserRating",(function(){this.username=void 0,this.score=void 0,this.place=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/web_utils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./auth_in.ts","./funcs3.ts"],(function(t){var e,n,r,a,i,s,o;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t.EventTarget},function(t){s=t.AuthIn},function(t){o=t.checkApiAvailablity}],execute:function(){a._RF.push({},"56425AdPKNNKKdvvNAzHVIF","web_utils",void 0);var u=t("WebUtils",function(){function t(){}return t.auth=function(){var e=n(r().mark((function e(){var n,a,i,u,c,p=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o(),a=n?globalThis.Telegram.WebApp.initData:"query_id=AAFW_MYaAAAAAFb8xhr9aiHd&user=%7B%22id%22%3A1%2C%22first_name%22%3A%22%22%2C%22last_name%22%3A%22%22%2C%22username%22%3A%22Dev%22%2C%22language_code%22%3A%22ru%22%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1727257101&hash=91a8577e5c730d0160b7690a16f7ccb18d08e8fd315b04924f694071d28923ea",t._tgId=n?globalThis.Telegram.WebApp.initDataUnsafe.user.id:1,i=globalThis.location.search,u=new URLSearchParams(i),c=null,u.has("tgWebAppStartParam")&&(c=u.get("tgWebAppStartParam")),e.next=9,this.post("/auth",new s(a,c)).then((function(t){return t.json().then((function(t){p.jwtToken=t.access_token,p.authorizedEt.emit((!0).toString())}))}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.get_with_auth=function(){var t=n(r().mark((function t(e,n,a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=new Headers),a.append("Authorization","Bearer "+this.jwtToken),t.abrupt("return",this.get(e,n,a));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),t.get=function(){var t=n(r().mark((function t(e,n,a){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=new Headers),a.append("Content-Type","application/json"),a.append("Access-Control-Allow-Origin",this.baseUrl),i=this.baseUrl+e+"?"+n.toString(),t.next=7,fetch(i,{method:"GET",headers:a});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),t.post_with_auth=function(){var t=n(r().mark((function t(e,n,a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=new Headers),a.append("Authorization","Bearer "+this.jwtToken),t.abrupt("return",this.post(e,n,a));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),t.post=function(){var t=n(r().mark((function t(e,n,a){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=new Headers),a.append("Content-Type","application/json"),a.append("Access-Control-Allow-Origin",this.baseUrl),i=this.baseUrl+e,t.next=6,fetch(i,{method:"POST",headers:a,body:JSON.stringify(n)});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),e(t,null,[{key:"tgId",get:function(){return t._tgId}}]),t}());u.baseUrl="https://potion-match-prod.architecton.site/api/v1",u.jwtToken=void 0,u._tgId=void 0,u.authorizedEt=new i,a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});